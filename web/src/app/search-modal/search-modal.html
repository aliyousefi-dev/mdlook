<dialog id="my_modal_2" class="modal text-base-content">
    <div class="modal-box p-3 max-h-[80vh] overflow-y-hidden flex flex-col gap-5">
        <!-- Search Input -->
        <label class="input w-full focus:outline-none">
            <i class="bx bx-search bx-xs"></i>
            <input autocomplete="off" #searchInput id="search" type="search" class="grow py-2" placeholder="Search"
                [(ngModel)]="query" (input)="onInput()" />
        </label>

        <!-- Loading Spinner -->
        @if (loading) {
        <div class="flex justify-center py-5">
            <span class="loading loading-spinner loading-xs"></span>
        </div>
        }


        @if (!loading && searchResults.length > 0) {
        <div class="py-5 overflow-y-auto flex-1">
            @for (result of searchResults; track $index) {
            <a (click)="CloseModal()" [routerLink]="result.path" class="btn w-full flex justify-start">
                <div class="flex justify-between w-full gap-2">
                    <div class="flex gap-2">
                        <i class="bx bx-file bx-xs"></i>
                        <span>{{ result.title }}</span>
                    </div>
                    <div class="flex gap-2">
                        <span class="text-xs">{{ result.path }}</span>
                        <span>↩︎</span>
                    </div>
                </div>
            </a>

            <!-- Display snippet of the content below the title with highlighted search term -->
            <div class="py-2 text-xs text-gray-600" [innerHTML]="getSnippet(result.content)">
            </div>
            }
        </div>
        }


        @if (!loading && searchResults.length === 0) {
        <!-- No Results Found Message -->
        <div class="py-5">
            <span>No results found for "{{ query }}"</span>
        </div>
        }


        <!-- See All Results Link -->
        <div class="w-full flex justify-center pt-4">
            <a href="#">Total Results {{searchResults.length}}</a>
        </div>

        <!-- Keyboard Shortcuts -->
        <div class="flex items-center gap-4 flex-wrap">
            <div class="flex gap-1">
                <kbd class="kbd">↓</kbd>
                <kbd class="kbd">↑</kbd>
                <span>Navigate</span>
            </div>
            <div class="flex gap-1">
                <kbd class="kbd">↵</kbd>
                <span>Select</span>
            </div>
            <div class="flex gap-1">
                <kbd class="kbd">Esc</kbd>
                <span>Close</span>
            </div>
        </div>
    </div>

    <form method="dialog" class="modal-backdrop">
        <button>close</button>
    </form>
</dialog>